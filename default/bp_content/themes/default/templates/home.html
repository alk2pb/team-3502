{% extends base_layout %}

{% block content %}
    
{% if user_id %}
  <div class="row">
    <div class="col-lg-12">
      <div class="jumbotron">
        <h1>Hello, world!</h1>
        <p>...</p>
        <p><a class="btn btn-primary btn-lg" role="button">Learn more</a></p>
      </div>
    </div>
  </div><!-- /.row -->
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-md-8">
      <div class="panel panel-custom">
        <div class="panel-heading">
          <h3 class="panel-title">Your Weight Over Time</h3>
        </div>
        <div class="panel-body">
          <div id="morris-chart-area"></div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <h2>Heading</h2>
      <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
      <p><a class="btn btn-default" href="#" role="button">View details Â»</a></p>
    </div>
  </div>
  
{% else %}
      
  <div class="row">
    <div class="col-lg-8">
      <div class="jumbotron">
        <h1>Hello, world!</h1>
        <p>...</p>
        <p><a class="btn btn-primary btn-lg" role="button">Learn more</a></p>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="well custom-well">
        <h3>{% trans %}Login with:{% endtrans %}</h3>
        <form id="form_login_user" action="{{ uri_for("login") }}" method="post">
            <fieldset>
                <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
                <div class="control-group">
                    <label class="controls">
                        <input class="focused required form-control" name="username" id="l_username" type="text" placeholder="{% trans %}Username or Email{% endtrans %}">
                    </label>
                </div>
                <div class="control-group">
                    <label class="controls">
                        <input class="focused required form-control" name="password" id="l_password" type="password" placeholder="{% trans %}Password{% endtrans %}">
                    </label>
                </div>
                <div class="control-group">
                  <button type="submit" class="btn btn-primary btn-login">{% trans %}Login{% endtrans %}</button>
                </div>
                <div class="control-group">
                    <label class="checkbox">
                        <input type="checkbox" name="remember_me" id="remember_me" value="on">
                        {% trans %}Remember me?{% endtrans %} <a href="{{ uri_for("password-reset") }}">{% trans %}Forgot your password?{% endtrans %}</a>
                    </label>
                    
                    
                </div>
                <h3>{% trans %}Or Login With:{% endtrans %}</h3>
                {{ macros.federated_login(provider_info, provider_uris, enable_federated_login) }}
            </fieldset>
        </form>
        <div class="sign-up">
          <h3>{% trans %}Sign Up{% endtrans %}</h3>
          <form id="form_register" action="{{ uri_for("register") }}" method="post">
              <fieldset>
                  <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
                  <div class="control-group">
                      <label class="controls">
                          <input class="focused required form-control" name="username" id="username" type="text" placeholder="{% trans %}Username{% endtrans %}">
                      </label>
                  </div>
                  <div class="control-group">
                      <label class="controls">
                          <input class="focused required email form-control" name="email" id="email" type="email" placeholder="{% trans %}Email{% endtrans %}">
                          <input type="hidden" name="country" value="">
                      </label>
                  </div>
                  <div class="control-group">
                      <label class="controls">
                          <input class="focused required form-control" name="password" id="password" type="password" placeholder="{% trans %}Password{% endtrans %}">
                      </label>
                  </div>
                  <div class="control-group">
                      <label class="controls">
                          <input class="focused required form-control" name="c_password" id="c_password" type="password" placeholder="{% trans %}Confirm Password{% endtrans %}">
                      </label>
                  </div>
                  <div class="control-group">
                      <input type="hidden" name="country">
                      <input type="hidden" name="tz">
                      <button type="submit" class="btn btn-primary">{% trans %}Sign Up{% endtrans %}</button>
                  </div>
              </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div><!-- /row -->
{% endif %}
    
{% endblock %}

{% block mediaJS %}
    <script type="text/javascript">
      Morris.Area({
        // ID of the element in which to draw the chart.
        element: 'morris-chart-area',
        // Chart data records -- each entry in this array corresponds to a point on
        // the chart.
        data: {{ data }},
        // The name of the data record attribute that contains x-visitss.
        xkey: 'd',
        // A list of names of data record attributes that contain y-visitss.
        ykeys: ['weight'],
        // Labels for the ykeys -- will be displayed when you hover over the
        // chart.
        labels: ['weight'],
        // Disables line smoothing
        smooth: false,
      });
    </script>
{% endblock %}